# Реализация алгоритма Triple DES на Python

## Описание проекта

Этот проект представляет собой реализацию алгоритма шифрования Triple DES (3DES) на языке Python. Алгоритм позволяет шифровать и расшифровывать текстовые данные, включая числа, знаки, латиницу и кириллицу, в соответствии с заданным алгоритмом.

## Структура проекта

```
3des_project/
├── src/
│   ├── __init__.py
│   └── tdes.py
├── tests/
│   ├── __init__.py
│   └── test_tdes.py
├── data/
│   ├── in.txt
│   └── out.txt
├── venv/
├── README.md
├── .gitignore
└── setup_project.sh
```

- **`src/tdes.py`** — реализация алгоритма 3-DES.
- **`tests/test_tdes.py`** — тесты для проверки корректности работы алгоритма.
- **`data/in.txt`** — входной файл с текстом для шифрования.
- **`data/out.txt`** — выходной файл с результатами шифрования и расшифровки.
- **`setup_project.sh`** — скрипт для создания структуры проекта.
- **`venv/`** — виртуальное окружение Python.
- **`README.md`** — данный файл с описанием проекта.

## Требования

- Python 3.12.4 (или совместимая версия Python 3)
- Установленные зависимости (можно установить через `pip install -r requirements.txt`)

## Установка и запуск

1. **Клонирование репозитория или копирование проекта**

   Склонируйте репозиторий или скопируйте файлы проекта на ваш компьютер.

2. **Создание виртуального окружения и установка зависимостей**

   Выполните следующие команды в терминале:

   ```bash
   cd 3des_project
   python3 -m venv venv
   source venv/bin/activate  # Для Windows: venv\Scripts\activate
   pip install -r requirements.txt
   ```

3. **Создание структуры проекта (если еще не создана)**

   Если вы используете скрипт `setup_project.sh`, запустите его:

   ```bash
   chmod +x setup_project.sh
   ./setup_project.sh
   ```

4. **Подготовка входных данных**

   В папке `data` находится файл `in.txt`. Вы можете отредактировать этот файл и ввести в него текст, который хотите зашифровать.

   Пример содержимого `in.txt`:

   ```
   Это сообщение будет зашифровано и расшифровано.
   ```

5. **Запуск программы**

   Из папки `src` запустите скрипт `tdes.py`:

   ```bash
   python tdes.py
   ```

   Программа прочитает входные данные из `data/in.txt`, зашифрует их и сохранит результаты в `data/out.txt`.

6. **Просмотр результатов**

   Откройте файл `data/out.txt` для просмотра результатов шифрования и расшифровки.

## Пример результатов

**Содержимое `data/in.txt`:**

```
Это сообщение будет зашифровано и расшифровано.
```

**После запуска программы, содержимое `data/out.txt` будет следующим:**

```
Шифротекст (hex):
d33d6e6b76c7b0b7e2a4f5a1716d6e7f4d5f0a3b2c1e6f0...

Расшифрованный текст:
Это сообщение будет зашифровано и расшифровано.
```

*Примечание:* Шифротекст представлен в шестнадцатеричном формате.

## Тестирование

Для запуска тестов выполните следующие команды:

```bash
# Активируйте виртуальное окружение, если оно еще не активно
source venv/bin/activate  # Для Windows: venv\Scripts\activate

# Установите pytest, если не установлен
pip install pytest

# Запустите тесты
pytest tests/test_tdes.py
```

Тесты проверяют корректность реализации алгоритма на основе известных тестовых векторов.

## Описание алгоритма

Triple DES (3DES) — симметричный алгоритм блочного шифрования, который использует алгоритм DES трижды для каждого блока данных. В режиме EDE3 (encrypt-decrypt-encrypt) с тремя разными ключами шифрование происходит следующим образом:

1. **Первое шифрование:** исходный текст шифруется с использованием первого ключа `K1`.
2. **Расшифровка:** результат первого шифрования расшифровывается с использованием второго ключа `K2`.
3. **Второе шифрование:** результат расшифровки шифруется с использованием третьего ключа `K3`.

В данной реализации ключи `K2` и `K3` равны и устанавливаются равными `0xFFFFFFFFFFFFFFFF`, как указано в описании задачи.

## Особенности реализации

- **Поддержка UTF-8:** Алгоритм корректно обрабатывает текстовые данные в кодировке UTF-8, что позволяет шифровать и расшифровывать сообщения, содержащие кириллицу и другие символы.
- **Поблочная обработка:** Данные разбиваются на блоки по 8 байт (64 бита) для шифрования.
- **Заполнение данных (padding):** Если длина данных не кратна 8 байтам, выполняется заполнение в соответствии со стандартом PKCS#5/PKCS#7.
- **Возможность ввода данных из файла:** Пользователь может вводить данные для шифрования через файл `data/in.txt` или непосредственно в коде программы.

## Как работает программа

1. **Чтение входных данных:** Программа проверяет наличие файла `data/in.txt`. Если файл существует, программа считывает из него данные для шифрования. В противном случае используется заранее заданное сообщение в коде программы.

2. **Инициализация ключей:** Задаются три ключа `key1`, `key2` и `key3`. В данной реализации `key1` устанавливается как `b'12345678'`, а `key2` и `key3` равны `bytes([0xFF] * 8)`.

3. **Создание экземпляра `TDES`:** Создается объект класса `TDES`, который использует три ключа для шифрования и расшифровки данных.

4. **Шифрование данных:** Данные шифруются методом `encrypt`, и результат сохраняется в переменную `ciphertext`.

5. **Запись результатов шифрования:** Шифротекст в шестнадцатеричном представлении записывается в файл `data/out.txt`.

6. **Расшифровка данных:** Шифротекст расшифровывается методом `decrypt`, и результат сохраняется в переменную `decrypted_text`.

7. **Запись результатов расшифровки:** Расшифрованный текст записывается в файл `data/out.txt`.

## Замечания

- **Безопасность ключей:** Для обеспечения безопасности рекомендуется использовать случайно сгенерированные ключи достаточной длины и не хранить их в открытом виде в коде программы.
- **Использование в реальных приложениях:** Алгоритм 3DES считается устаревшим и не рекомендуется для использования в новых системах из-за ограниченной длины ключа и уязвимостей к атакам. Рекомендуется использовать современные алгоритмы шифрования, такие как AES.

```

### 5. Пример запуска программы и получения результатов

**Содержимое `data/in.txt`:**

```
Это тестовое сообщение для проверки работы алгоритма 3DES.
```

**Запуск программы:**

```bash
cd src
python tdes.py
```

**Вывод в консоль:**

```
Шифротекст (hex): b'3a7f5c...'
Расшифрованный текст: Это тестовое сообщение для проверки работы алгоритма 3DES.
```

**Содержимое `data/out.txt`:**

```
Шифротекст (hex):
3a7f5c...

Расшифрованный текст:
Это тестовое сообщение для проверки работы алгоритма 3DES.
```

*Примечание:* Значение шифротекста сокращено для краткости.

### 6. Обновление `setup_project.sh` для создания папки `data`

**Файл `setup_project.sh`:**

```bash
#!/bin/bash

# Создаем основную папку проекта
mkdir 3des_project
cd 3des_project

# Создаем виртуальное окружение
python3 -m venv venv

# Активируем виртуальное окружение
source venv/bin/activate

# Создаем основные папки
mkdir src tests data

# В папке src создаем файлы
touch src/__init__.py
touch src/tdes.py

# В папке tests создаем файлы
touch tests/__init__.py
touch tests/test_tdes.py

# В папке data создаем файлы
touch data/in.txt
touch data/out.txt

# Устанавливаем необходимые зависимости
pip install pytest

# Создаем файл README
touch README.md

# Создаем файл .gitignore
echo "venv/" >> .gitignore
echo "__pycache__/" >> .gitignore
echo "*.pyc" >> .gitignore
echo "data/out.txt" >> .gitignore

echo "Структура проекта создана успешно."
```

### 7. Дополнительные замечания

- **Совместимость с Python 3.12.4:** Код протестирован и совместим с версией Python 3.12.4.
- **Рекомендации по улучшению:** Вы можете расширить функциональность программы, добавив поддержку различных режимов работы 3DES, обработку исключений и улучшенный интерфейс пользователя.
---